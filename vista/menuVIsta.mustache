<main class="w-full p-8 flex flex-col gap-8 text-[#E2E4F3]">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

        <!-- ===== COLUMNA IZQUIERDA: PERFIL Y ACCIONES ===== -->
        <aside class="md:col-span-1 flex flex-col items-center">

            <!-- Foto de perfil -->
            <img src="/public/placeholder.png"
                 alt="Foto de perfil"
                 class="w-32 h-32 rounded-full object-cover border-4 border-[#E65895] shadow-lg" />

            <!-- Req #1: Nombre de usuario -->
            {{#sesion}}
            <h1 class="text-3xl font-bold text-center mt-4">{{nombreDeUsuario}}</h1>

            <!-- Req #1: Puntaje -->
            <div class="mt-3 flex items-center justify-center gap-2 p-2 bg-[#2c2f56] rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-[#BC6BE8]">
                    <path fill-rule="evenodd" d="M16.5 1.5c.965 0 1.75.785 1.75 1.75v17.5c0 .965-.785 1.75-1.75 1.75h-9c-.965 0-1.75-.785-1.75-1.75V3.25c0-.965.785-1.75 1.75-1.75h9Zm-9 1.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Z" clip-rule="evenodd" />
                </svg>
                <span class="text-xl font-semibold text-white">{{puntajeAcumulado}} Puntos</span>
            </div>

            <!-- Contenedor de Acciones -->
            <div class="w-full flex flex-col items-center mt-8 space-y-4">

                <!-- Req #2: Botón Crear Partida -->
                <a href="/partida/crear" class="w-full py-3 rounded-lg bg-gradient-to-r from-[#E65895] to-[#BC6BE8] text-white font-semibold hover:opacity-90 active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-[#BC6BE8] focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                    </svg>
                    Crear Nueva Partida
                </a>
                <!-- Req #3: Botón Ver Ranking -->
                <a href="/ranking" class="w-full py-3 rounded-lg bg-[#2c2f56] text-white font-semibold hover:bg-[#3f4477] active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-[#BC6BE8] focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M4.5 2.25a.75.75 0 0 0 0 1.5v16.5a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6.75a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-1.5 0V7.5A.75.75 0 0 1 9 6.75Zm3.75.75a.75.75 0 0 0-1.5 0v10.5a.75.75 0 0 0 1.5 0V7.5Zm3-1.5a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-1.5 0V7.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
                    </svg>
                    Ver Ranking Global
                </a>
            </div>
            {{/sesion}}
        </aside>

        <!-- ===== COLUMNA DERECHA: HISTORIAL DE PARTIDAS ===== -->
        <!-- Req #4: Listado de partidas -->
        <section class="md:col-span-2">
            <h2 class="text-2xl font-bold mb-6 border-b-2 border-[#2c2f56] pb-2">Ranking</h2>

            <!-- Contenedor del historial -->
            <div class="space-y-4">
                {{#ranking}}
                    <!--
                      Req #5: El item completo es un link.
                      He asumido que la URL del perfil se basa en el 'nombreDeUsuario'.
                      Añadido 'block' para que el <a> ocupe todo el espacio.
                    -->
                    <a href="/perfil/base/{{id}}"
                       class="bg-[#2c2f56] rounded-lg p-4 flex items-center justify-between transition hover:bg-[#3f4477] block">

                        <!-- Lado Izquierdo: Rango + Imagen + Nombre -->
                        <div class="flex items-center gap-4">

                            <!--
                          Req #1: Número del Ranking.
                          ¡IMPORTANTE! Asumo que tu Controlador ahora provee una variable {{posicion}}.
                        -->
                            <span class="w-10 text-center text-2xl font-bold text-gray-400">{{posicion}}.</span>
                            <img src="{{fotoPerfil}}"
                                 onerror="this.src='/public/placeholder.png'"
                                 alt="Foto de {{nombreDeUsuario}}"
                                 class="w-12 h-12 rounded-full object-cover border-2 border-[#BC6BE8]">

                            <!-- Req #4: Nombre del Jugador -->
                            <div>
                                <p class="font-semibold text-lg text-white">{{nombreDeUsuario}}</p>
                            </div>
                        </div>

                        <!-- Lado Derecho: Puntaje -->
                        <div class="text-right">
                            <!-- Req #2: Puntaje -->
                            <p class="font-bold text-lg text-green-400">{{puntajeAcumulado}} Pts</p>
                        </div>
                    </a>
                {{/ranking}}
            </div>
        </section>

    </div>
</main>