<main class="w-full p-8 flex flex-col gap-8 text-[#E2E4F3]">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

        <!-- ===== COLUMNA IZQUIERDA: PERFIL Y ACCIONES ===== -->
        <aside class="md:col-span-1 flex flex-col items-center">

          <!-- Foto de perfil -->
          <img src="{{#sesion}}{{fotoDePerfil}}{{/sesion}}"
              onerror="this.src='/public/placeholder.png'"
              alt="Foto de perfil"
              class="w-32 h-32 rounded-full object-cover border-4 border-[#E65895] shadow-lg" />

            <!-- Req #1: Nombre de usuario -->
            {{#sesion}}
            <h1 class="text-3xl font-bold text-center mt-4">{{nombreDeUsuario}}</h1>
            <!-- Req #1: Puntaje -->
            {{#isJugador}}
            <div class="mt-3 flex items-center justify-center gap-2 p-2 bg-[#2c2f56] rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-[#BC6BE8]">
                    <path fill-rule="evenodd" d="M16.5 1.5c.965 0 1.75.785 1.75 1.75v17.5c0 .965-.785 1.75-1.75 1.75h-9c-.965 0-1.75-.785-1.75-1.75V3.25c0-.965.785-1.75 1.75-1.75h9Zm-9 1.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Zm0 4.5v3h9v-3h-9Z" clip-rule="evenodd" />
                </svg>
                <span class="text-xl font-semibold text-white">{{mejorPuntaje}} Puntos</span>
            </div>
            <div class="mt-3 flex items-center justify-center gap-2 p-2 bg-[#2c2f56] rounded-lg">
                <span class="text-xl font-semibold text-white">{{ratio}} Ratio</span>
            </div>
            {{/isJugador}}
            <!-- Contenedor de Acciones -->
            <div class="w-full flex flex-col items-center mt-8 space-y-4">
                <!-- Req #2: Botón Crear Partida -->
                {{#isJugador}}
                <a href="/buscarpartida/jugarpartida" class="w-full py-3 rounded-lg bg-gradient-to-r from-[#E65895] to-[#BC6BE8] text-white font-semibold hover:opacity-90 active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-[#BC6BE8] focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                    </svg>
                    Crear Nueva Partida
                </a>
                {{/isJugador}}

                <!-- Req #3: Botón Ver Ranking -->
                <a href="/ranking" class="w-full py-3 rounded-lg bg-[#2c2f56] text-white font-semibold hover:bg-[#3f4477] active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-[#BC6BE8] focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M4.5 2.25a.75.75 0 0 0 0 1.5v16.5a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6.75a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-1.5 0V7.5A.75.75 0 0 1 9 6.75Zm3.75.75a.75.75 0 0 0-1.5 0v10.5a.75.75 0 0 0 1.5 0V7.5Zm3-1.5a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-1.5 0V7.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
                    </svg>
                    Ver Ranking Global
                </a>
                <button id="btnSugerirPregunta" type="button" class="w-full py-3 rounded-lg bg-[#320E3B] text-white font-semibold hover:bg-[#9A2BB6] active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-[#BC6BE8] focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    Sugerir Pregunta
                </button>

                {{#isEditor}}
                <a href="/paneleditor" class="w-full py-3 rounded-lg bg-yellow-600 text-white font-semibold hover:bg-yellow-700 active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z" />
                    </svg>
                    Panel de Editor
                </a>
                {{/isEditor}}
                {{#isAdmin}}
                <!-- Botón Panel Admin (solo visible para editores) -->
                <a href="/paneladmin" class="w-full py-3 rounded-lg bg-yellow-600 text-white font-semibold hover:bg-yellow-700 active:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-[#343964] flex items-center justify-center gap-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z" />
                    </svg>
                    Panel de Admin
                </a>
                {{/isAdmin}}
            </div>
            {{/sesion}}
        </aside>
        
        <!-- ===== COLUMNA DERECHA: HISTORIAL DE PARTIDAS ===== -->
        <!-- Req #4: Listado de partidas -->
        <section class="md:col-span-2">
            <h2 class="text-2xl font-bold mb-6 border-b-2 border-[#2c2f56] pb-2">Ranking</h2>

            <!-- Contenedor del historial -->
            <div class="space-y-4">
                {{#ranking}}
                    <a href="/perfil/base/{{id}}"
                       class="bg-[#2c2f56] rounded-lg p-4 flex items-center justify-between transition hover:bg-[#3f4477] block">

                        <!--  Rango + Imagen + Nombre -->
                        <div class="flex items-center gap-4">

                            <span class="w-10 text-center text-2xl font-bold text-gray-400">{{posicion}}.</span>
                       <img src="{{fotoPerfil}}"
                           onerror="this.src='/public/placeholder.png'"
                           alt="Foto de {{nombreDeUsuario}}"
                           class="w-12 h-12 rounded-full object-cover border-2 border-[#BC6BE8]">

                            <!-- Req #4: Nombre del Jugador -->
                            <div>
                                <p class="font-semibold text-lg text-white">{{nombreDeUsuario}}</p>
                            </div>
                        </div>

                        <!-- Lado Derecho: Puntaje -->
                        <div class="text-right">
                            <p class="font-bold text-lg text-green-400">{{mejorPuntaje}} Pts</p>
                        </div>
                    </a>
                {{/ranking}}
            </div>
            <div id="modalSugerir" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-[#1e1f3b] rounded-lg p-6 w-full max-w-2xl text-white shadow-lg">
                    <h3 class="text-xl font-semibold mb-3">Sugerir nueva pregunta</h3>
                    <form id="formSugerir" action="/paneleditor/guardarSugerencia" method="POST" class="flex flex-col gap-4">
                        <div>
                            <label class="block text-sm mb-1 text-gray-300">Pregunta</label>
                            <textarea name="descripcion" rows="3" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm mb-1 text-gray-300">Categoría</label>
                                <select name="id_categoria" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required>
                                    <option value="">Seleccionar...</option>
                                    {{#categorias}}
                                        <option value="{{id}}">{{descripcion}}</option>
                                    {{/categorias}}

                                </select>
                            </div>
                        </div>
                        <div class="mt-2">
                            <h4 class="text-lg font-semibold text-[#BC6BE8] mb-2">Respuestas</h4>
                            <div class="flex flex-col gap-2">
                                <input name="respuesta_correcta" placeholder="Respuesta correcta" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required />
                                <input name="respuesta_incorrecta1" placeholder="Respuesta incorrecta 1" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required />
                                <input name="respuesta_incorrecta2" placeholder="Respuesta incorrecta 2" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required />
                                <input name="respuesta_incorrecta3" placeholder="Respuesta incorrecta 3" class="w-full bg-[#1e1f3b] border border-[#3f4477] rounded-lg p-2 text-white" required />
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-4">
                            <button type="button" id="cerrarSugerir" class="px-4 py-2 bg-gray-600 rounded-lg hover:bg-gray-700">Cancelar</button>
                            <button type="submit" class="px-4 py-2 bg-[#BC6BE8] rounded-lg hover:opacity-80">Enviar Sugerencia</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    
    </div>
</main>
<script src="../public/Javascript/sugerirPregunta.js"></script>